<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>更新</title>
<style type="text/css">
/*初始化页面  */
body, ol, ul, h1, h2, h3, h4, h5, h6, p, th, td, dl, dd, form, fieldset,
	legend, input, textarea, select {
	margin: 0;
	padding: 0
}

body {
	font: 12px "宋体", "Arial Narrow", HELVETICA;
	background: #fff;
	-webkit-text-size-adjust: 100%;
}

a {
	color: #2d374b;
	text-decoration: none
}

a:hover {
	color: #cd0200;
	text-decoration: underline
}

em {
	font-style: normal
}

li {
	list-style: none
}

img {
	border: 0;
	vertical-align: middle
}

table {
	border-collapse: collapse;
	border-spacing: 0
}

p {
	word-wrap: break-word
}
/* 页面css*/
#addMessage table tr td:last-child {
	display: inline-block;
	line-height: 30px;
	height: 30px;
	width: 500px;
	border: 1px solid #2f1f1f;
	border-collapse: collapse;
	text-align: center;
}

#addMessage table tr td:first-child {
	display: inline-block;
	line-height: 30px;
	height: 30px;
	width: 200px;
	border: 1px solid #2f1f1f;
	border-collapse: collapse;
	text-align: center;
}

#addMessage {
	margin-left: 30px;
	margin-top: -10px;
}

#addMessage table  tr td:last-child {
	text-align: left;
	padding-left: 10px;
}

#addMessage table  tr:first-child td input {
	display: inline;
	width: 350px;
	line-height: 23px;
	height: 23px;
	border: 1px solid #c3adad;
	border-radius: 4px;
}

#addMessage table tr:nth-child(2) td span {
	margin-right: 20px;
	margin-left: 5px;
}

#addMessage table tr td textarea {
	margin-top: 3px;
	border-radius: 5px;
}

#messageTitle {
	font-size: 22px;
	height: 30px;
	line-height: 30px;
	margin-top: 20px;
	margin-left: 278px;
}

#addMessage table tr:nth-child(5) td span:first-child {
	display: block;
	height: 10px;
	margin-top: -20px;
	margin-bottom: 10px;
}

#addMessage table tr:nth-child(5) td span:first-child input {
	display: inline-block;
	height: 15px;
	width: 20px;
	margin-right: 5px;
}

#addMessage table tr:nth-child(5) td span:nth-child(2) {
	display: block;
	height: 10px;
	margin-bottom: 16px;
}

#addMessage table tr:nth-child(5) td span:nth-child(2) input {
	display: inline-block;
	height: 15px;
	width: 20px;
	margin-right: 5px;
}

#addMessage table tr:nth-child(5) td span:nth-child(3) input {
	display: inline-block;
	height: 25px;
	width: 75px;
	margin-right: 15px;
}

#addMessage table tr:nth-child(6) td  input {
	margin-right: 15px;
}

#sumbmitMessage input {
	display: inline-block;
	height: 40px;
	width: 70px;
	line-height: 30px;
	margin-top: 7px;
	margin-left: 300px;
	margin-bottom:10px;
	border-radius: 3px;
	border: none;
	background-color: #169CD1;
	color: white;
}
#sumbmitMessage input:active{
background-color: white;
color: black;
}

#addMessage table tr td input {
	display: inline;
	width: 350px;
	line-height: 23px;
	height: 23px;
	border: 1px solid #c3adad;
	border-radius: 4px;
}
#sumbmitMessage input:hover {
	background-color:#00d9d9;
	cursor: pointer;
}
</style>
<script src="/lottery/js/jquery-1.8.2.js" type="text/javascript"
	charset="utf-8"></script>

</head>
<body>
	<div id="messageTitle">竞彩足球赛程赔率</div>
	<div id="addMessage">
		<table style="border-collapse: collapse;">
			<tr>
				<td>赛事ID：</td>
				<td><input th:value="${dataList['mId']}" readonly="readonly"></td>
			</tr>
			<tr>
				<td>场次ID：</td>
				<td><input th:value="${dataList['mNum']}" readonly="readonly"></td>
			</tr>
			<tr>
				<td>场次名称：</td>
				<td><input th:value="${dataList['mNumName']}" readonly="readonly"></td>
			</tr>
				<tr>
				<td>比赛时间</td>
				<td><input 
					th:value="${dataList['mTimeTow']}" readonly="readonly"></td>
			</tr>
			<tr>
				<td>联赛名称：</td>
				<td><input th:value="${dataList['mLcn']}" readonly="readonly"></td>
			</tr>
						<tr>
				<td>主队名称：</td>
				<td><input th:value="${dataList['mHcn']}" readonly="readonly"></td>
			</tr>
						<tr>
				<td>客队名称：</td>
				<td><input th:value="${dataList['mAcn']}" readonly="readonly"></td>
			</tr>

		
			<tr>
				<td>是否销售</td>
				<td><select>
						<option value="0" th:selected="(${dataList['status']} eq 0)">否</option>
						<option value="1" th:selected="(${dataList['status']} eq 1)">是</option>
				</select></td>
			</tr>
				<tr>
				<td>让球数：</td>
				<td><input th:value="${dataList['hhadRq']}" readonly="readonly"></td>
			</tr>
				<tr>
				<td>半场比分：</td>
				<td><input th:value="${dataList['halfScore']}"></td>
			</tr>
				<tr>
				<td>全场比分：</td>
				<td><input th:value="${dataList['finalScore']}"></td>
			</tr>
			</tr>
				<tr>
				<td>比赛状态：</td>
				<td><select>
						<option value="Played" th:selected="(${dataList['mStatus']} eq Played)">完场</option>
						<option value="Fixture" th:selected="(${dataList['mStatus']} eq Fixture)">未开赛</option>
						<option value="Playing" th:selected="(${dataList['mStatus']} eq Playing)">进行中</option>
						<option value="Postponed" th:selected="(${dataList['mStatus']} eq Postponed)">延期</option>
						<option value="Suspended" th:selected="(${dataList['mStatus']} eq Suspended)">暂停</option>
						<option value="Cancelled" th:selected="(${dataList['mStatus']} eq Cancelled)">取消</option>
				</select></td>
			</tr>
			<tr>
				<td>最终比赛时间：</td>
				<td><input type="datetime-local"
					th:value="${dataList['dTimeTow']}"></td>
			</tr>
			<tr>
				<td>最后修改时间：</td>
				<td><input type="datetime-local"
					th:value="${dataList['lastUpdateTimeTow']}"></td>
			</tr>
			</tr>
			<tr>
				<td>创建时间</td>
				<td><input
					th:value="${dataList['createTimeTow']}" readonly="readonly"></td>
			</tr>>
		</table>
		<div id="saveData" th:attr="idValue=${dataList['id']}" hidden="true"></div>
	</div>
	<div id="sumbmitMessage">
		<input type="button" onclick="save()" value="保存">
	</div>
	<script type="text/javascript">
//日期帮助类
Date.prototype.format = function (format) {
    var args = {
        "M+": this.getMonth() + 1,
        "d+": this.getDate(),
        "h+": this.getHours(),
        "m+": this.getMinutes(),
        "s+": this.getSeconds(),
        "q+": Math.floor((this.getMonth() + 3) / 3),  //quarter
        "S": this.getMilliseconds()
    };
    if (/(y+)/.test(format))
        format = format.replace(RegExp.$1, (this.getFullYear() + "").substr(4 - RegExp.$1.length));
    for (var i in args) {
        var n = args[i];
        if (new RegExp("(" + i + ")").test(format))
            format = format.replace(RegExp.$1, RegExp.$1.length == 1 ? n : ("00" + n).substr(("" + n).length));
    }
    return format;
};


//修改消息
function save(){
		
	var id =$("#saveData").attr("idValue");
	var status=$("#addMessage table tr:nth-child(8) td select option:selected").val();
	var halfScore =$("#addMessage table tr:nth-child(10) td input").val();
	var finalScore =$("#addMessage table tr:nth-child(11) td input").val();
	var mStatus=$("#addMessage table tr:nth-child(12) td select option:selected").val();
	var dTime =$("#addMessage table tr:nth-child(13) td input").val();
	var lastUpdateTime =$("#addMessage table tr:nth-child(14) td input").val();
	
	if(halfScore!=""&&halfScore!=null){
		var index =halfScore.indexOf(":");
		if(index<=0){
			alert("请填写正确半场比分格式如：1:1")
			return;
		}		
	}
	if(finalScore!=""&&finalScore!=null){
		var index =finalScore.indexOf(":");
		if(index<=0){
			alert("请填写正确的全场比分格式如：1:1")
			return;
		}		
	}
	
	if(dTime!=""&&dTime!=null){
		dTime =new Date(dTime).format("yyyy-MM-dd hh:mm:ss")
	}
	if(lastUpdateTime!=""&&lastUpdateTime!=null){
		lastUpdateTime =new Date(lastUpdateTime).format("yyyy-MM-dd hh:mm:ss")
	}
 		$.ajax({
			type : "Get",
			url : "/lottery/betMatchfb/updateBetMatchfb",
			data : {
				"id" : id,
				"status" : status,
				"halfScore" : halfScore,
				"finalScore" : finalScore,
				"mStatus" : mStatus,
				"dTime" : dTime,
				"lastUpdateTime" : lastUpdateTime
			},
			/* dataType : "json", */
			success : function(data) {
				if("sucess"==data){
					alert("修改成功")
					var index = parent.layer.getFrameIndex(window.name);
					parent.layer.close(index);
				}else{
					alert("保存失败，请重新保存，谢谢")
				}
			}
		});
     }



</script>

</body>
</html>