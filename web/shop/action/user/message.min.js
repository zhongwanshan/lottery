(function(){new Vue({el:"#js-message",data:{userInfo:USERINFO,imageData:USERINFO.headImageUrl||"",messageInfo:{curPage:1,pageSize:10,type:0,readStatus:2,action:CONFIG.ACTION.getUserSiteMessageList},pageCount:1,listInfo:{type_0:[],type_1:[],type_2:[],type_3:[],type_4:[]},typeStr:{0:"全部",1:"优惠信息",2:"中奖通知",3:"活动",4:"其它"},readStatusStr:{0:"未读",1:"已读",2:"全部"},messageList:[]},watch:{"messageInfo.type":function(){var e=this;e.getUserSiteMessageList()},"messageInfo.readStatus":function(){var e=this;e.getUserSiteMessageList()}},methods:{userLogout:function(){utility.userLogout(function(){window.location.replace(CONFIG.HOST+"/shop/view/user/login.html")})},getUserSiteMessageList:function(){var e=this;utility.interactWithServer({headerInfo:{appType:"2",userId:USERINFO?USERINFO.userId:"",userToken:USERINFO?USERINFO.userToken:"",actionUrl:utility.formatActionUrl(CONFIG.SERVICE.commonService,CONFIG.ACTION.getUserSiteMessageList,e.messageInfo)},url:CONFIG.HOST+CONFIG.SERVICE.commonService,dataObj:e.messageInfo,successCallback:function(t){200==t.code?e.messageList=t.data:alert(t.message)}})},getByPage:function(e){var t=this;t.messageInfo.curPage=e,t.getUserSiteMessageList()},getPreViewData:function(){var e=this;e.messageInfo.curPage>1&&(e.messageInfo.curPage=e.messageInfo.curPage-1,e.getUserSiteMessageList())},getNextData:function(){var e=this;e.messageInfo.curPage<e.pageCount&&(e.messageInfo.curPage=e.messageInfo.curPage+1,e.getUserSiteMessageList())}},created:function(){var e=this;e.getUserSiteMessageList(),setTimeout(function(){e.userInfo=USERINFO},1e3)}})})();