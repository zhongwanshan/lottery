(function(){new Vue({el:"#js-pageRs9",data:{userInfo:USERINFO,matchData:[],matchList:[],matchInfoObj:null,numList:[],num:"",matchNum:0,betNum:0,selectItem:{num:0},buyInfo:{action:CONFIG.ACTION.previewOrder,lotteryTypeId:"1003",issueNo:"",type:0,betDetail:"",multipleNum:1},isShowMenu:!1,totalOrderPrice:0},watch:{"buyInfo.multipleNum":function(t){var e=this;t<=0&&(e.buyInfo.multipleNum=1),e.selectItem.num>=9&&e.setOrderInfo()}},methods:{userLogout:function(){utility.userLogout(function(){window.location.replace(CONFIG.HOST+"/www/index.html")})},setCheckBox:function(t){for(var e=[],n=0,a=t.length;n<a;n++)(function(n){t[n].matchInfo={sf:[]},e.push(t[n])})(n);return e},formatMatchData:function(){for(var t=this,e=[],n={},a=0,r=t.matchList.length;a<r;a++)(function(a){var r=t.matchList[a].num;e.push(r),n[r]=[]})(a);t.numList=$.unique(e),t.num=t.numList[0],t.buyInfo.issueNo=t.numList[0];for(var i in n)if(n.hasOwnProperty(i))for(var o=0,c=t.matchList.length;o<c;o++)(function(e){var a=t.matchList[e].num;i==a&&n[i].push(t.matchList[e])})(o);t.matchInfoObj=n},geFbTraditionMatches:function(){var t=this;utility.interactWithServer({headerInfo:{userId:USERINFO?USERINFO.userId:"",userToken:USERINFO?USERINFO.userToken:"",actionUrl:utility.formatActionUrl(CONFIG.SERVICE.lotteryService,CONFIG.ACTION.geFbTraditionMatches,{action:CONFIG.ACTION.geFbTraditionMatches})},url:CONFIG.HOST+CONFIG.SERVICE.lotteryService,dataObj:{action:CONFIG.ACTION.geFbTraditionMatches},successCallback:function(e){200==e.code&&e.data&&(t.matchList=t.setCheckBox(e.data),t.formatMatchData(),t.matchData=t.matchInfoObj[t.num])}})},bindClickEvent:function(t){var e=this;setTimeout(function(){for(var t=0,n=1,a=[],r=0,i=e.matchData.length;r<i;r++)e.matchData[r].matchInfo.sf.length>0&&t++,0!==e.matchData[r].matchInfo.sf.length&&a.push(e.matchData[r].matchInfo.sf.length*n);if(a.length>=9){for(var o=0,c=a.length;o<c;o++)n*=a[o];e.betNum=n}else e.betNum=0;e.matchNum=t},500)},getCheckResult:function(t){for(var e=[],n=0,a=t.length;n<a;n++)e.push(t[n].split(","));return e.join(",")},reFormatMatch:function(t){for(var e=[],n=0,a=t.length;n<a;n++)e.push(n+1+"|"+t[n]);return e.join("#")},countSelectItem:function(t){var e=this,n=0,a="",r=[];for(var i in t)if(t.hasOwnProperty(i))for(var o=0,c=t[i].length;o<c;o++){var u=t[i][o],s=u.matchInfo,h=s.sf,m=h.length;m>0&&(n++,r.push(u.lottoid+"|"+u.num+"|"+(m>0?e.getCheckResult(h):"")))}a=e.reFormatMatch(r)+"%CG_9_1",e.buyInfo.betDetail=a,e.selectItem.num=n,e.setOrderInfo()},setOrderInfo:function(){var t=this;t.selectItem.num>=9&&utility.previewOrder({appType:"2",service:CONFIG.SERVICE.bOrderService,params:t.buyInfo,callback:function(e){utility.setSessionStorage("orderInfo",{buyInfo:t.buyInfo}),utility.setSessionStorage("resultList",e.matchList),t.totalOrderPrice=e.totalOrderPrice}})},generateOrder:function(){var t=this;return t.selectItem.num<9?(alert("请选择9场球赛"),!1):void utility.generateOrder({appType:"2",service:CONFIG.SERVICE.bOrderService,callback:function(t){window.location.href=CONFIG.HOST+"/www/view/order/pay.html"}})}},created:function(){var t=this;t.geFbTraditionMatches(),t.$watch("matchInfoObj",function(e,n){t.countSelectItem(e)},{deep:!0})}})})();