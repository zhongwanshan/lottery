(function(){new Vue({el:"#js-pageFc3d",data:{offTime:"",currentIssueName:"",buyInfo:{action:CONFIG.ACTION.previewOrder,type:0,lotteryTypeId:"12",issueNo:"",digitalBetType:"6",dBetFunction:"1",betDetail:"",extraAdd:0,multipleNum:1,followFlag:0,followIssueNum:"",followStopFor:0},isCheck:!0,dBetIssueText:CONFIG.DIGITALISSUE.d_6,betNum:0,betMoney:0,bList:[],sList:[],gList:[],aList:[],zPList:[],zDList:[],zDDList:[],zHList:[],gCheck:["5","6"],resultList:[],orderInfoDetail:{},groupNum:7,isShowTypeSelect:!1,isShowMenu:!1},watch:{"buyInfo.digitalBetType":function(t){var e=this;e.dBetIssueText=CONFIG.DIGITALISSUE["d_"+t],e.emptySelect(),utility.setiScroll()},"buyInfo.dBetFunction":function(t){utility.setiScroll()},"buyInfo.multipleNum":function(t){var e=this;t<0&&(e.buyInfo.multipleNum=1),e.resultList.length>0&&t>0&&e.setOrderInfo()},zDDList:function(t){var e=this;t.length>3&&(e.zDDList=t.slice(0,t.length-1))},gCheck:function(t){var e=this;2==t.length?e.groupNum=7:1==t.length&&(e.groupNum=t[0])},"buyInfo.followFlag":function(t){var e=this;0==t?e.buyInfo.followIssueNum="":1==t&&(e.buyInfo.followIssueNum=e.buyInfo.issueNo)}},methods:{showMenu:function(){var t=this;t.isShowMenu=!t.isShowMenu},showTypeSelect:function(){var t=this;t.isShowTypeSelect=!t.isShowTypeSelect},clearAll:function(){var t=this;t.emptySelect(),t.resultList=[],t.orderInfoDetail={},t.betNum=0,t.betMoney=0,utility.setSessionStorage("resultList",null),utility.setSessionStorage("orderInfo",null),utility.setiScroll()},emptySelect:function(){var t=this;t.bList=[],t.sList=[],t.gList=[],t.aList=[],t.zPList=[],t.zDList=[],t.zDDList=[],t.zHList=[]},randomBuyTime:function(t){var e=this;e.emptySelect(),e.buyInfo.digitalBetType=6,e.buyInfo.dBetFunction=1;for(var i=0;i<t;i++)(function(t){setTimeout(function(){var t=utility.genreateArr(9),i=utility.getArrByNum(t,1,1),s=utility.getArrByNum(t,1,1),o=utility.getArrByNum(t,1,1);e.bList=i,e.sList=s,e.gList=o,e.addToResult()},500)})(i)},validate:function(){var t=this;if(6==t.buyInfo.digitalBetType){if(1==t.buyInfo.dBetFunction){if(0==t.bList.length)return app.showPreloader("至少选择1个百位"),setTimeout(function(){app.hidePreloader()},1e3),!1;if(0==t.sList.length)return app.showPreloader("至少选择1个十位"),setTimeout(function(){app.hidePreloader()},1e3),!1;if(0==t.gList.length)return app.showPreloader("至少选择1个个位"),setTimeout(function(){app.hidePreloader()},1e3),!1}else if(4==t.buyInfo.dBetFunction&&0==t.aList.length)return app.showPreloader("至少选择1个球"),setTimeout(function(){app.hidePreloader()},1e3),!1}else if(5==t.buyInfo.digitalBetType)if(1==t.buyInfo.dBetFunction){if(t.zPList.length<=1)return app.showPreloader("至少选择2个球"),setTimeout(function(){app.hidePreloader()},1e3),!1}else if(2==t.buyInfo.dBetFunction){if(t.zDList.length<=3)return app.showPreloader("至少选择4个球"),setTimeout(function(){app.hidePreloader()},1e3),!1;if(0==t.zDDList.length)return app.showPreloader("至少选择1个胆码"),setTimeout(function(){app.hidePreloader()},1e3),!1}else if(4==t.buyInfo.dBetFunction&&0==t.zHList.length)return app.showPreloader("至少选择1个球"),setTimeout(function(){app.hidePreloader()},1e3),!1;return!0},addToResult:function(t){var e=this;0!=e.validate()&&(e.resultList.push({aList:e.aList,bList:e.bList,sList:e.sList,gList:e.gList,zPList:e.zPList,zDList:e.zDList,zDDList:e.zDDList,zHList:e.zHList,dBetFunction:e.buyInfo.dBetFunction,digitalBetType:e.buyInfo.digitalBetType}),e.emptySelect(),utility.setSessionStorage("resultList",e.resultList),utility.setiScroll(),e.setOrderInfo())},deleteResult:function(t){var e=this;e.resultList.splice(t,1),e.orderInfoDetail.digitalOrderItems.splice(t,1),utility.setSessionStorage("resultList",e.resultList),0==e.resultList.length?(e.betNum=0,e.betMoney=0):e.setOrderInfo()},getDigitalIssue:function(){var t=this;utility.getDigitalIssue({lottoId:t.buyInfo.lotteryTypeId,appType:1,callback:function(e){t.buyInfo.issueNo=e.data[0].currentIssueNo,t.currentIssueName=e.data[0].currentIssueName,t.offTime=e.data[0].offTime}})},setOrderInfo:function(){var t=this;utility.setDigitalOrderInfo(t,t.buyInfo.lotteryTypeId,"福彩3D",function(e,i){if(6==t.resultList[i].digitalBetType){if(1==t.resultList[i].dBetFunction)return t.resultList[i].digitalBetType+"|"+t.resultList[i].dBetFunction+"||"+t.resultList[i].bList.join("")+","+t.resultList[i].sList.join("")+","+t.resultList[i].gList.join("")+"||";if(4==t.resultList[i].dBetFunction)return t.resultList[i].digitalBetType+"|"+t.resultList[i].dBetFunction+"||"+t.resultList[i].aList.join(",")+"||"}else if(5==t.resultList[i].digitalBetType){if(1==t.resultList[i].dBetFunction)return t.resultList[i].digitalBetType+"|"+t.groupNum+"||"+t.resultList[i].zPList.join(",")+"||";if(2==t.resultList[i].dBetFunction)return t.resultList[i].digitalBetType+"|"+t.groupNum+"|"+t.resultList[i].zDDList.join(",")+"|"+utility.duplicate(t.resultList[i].zDList,t.resultList[i].zDDList).join(",")+"||";if(4==t.resultList[i].dBetFunction)return t.resultList[i].digitalBetType+"|"+t.resultList[i].dBetFunction+"||"+t.resultList[i].zHList.join(",")+"||"}},function(){var e=utility.getSessionStorage("orderInfo");utility.previewOrder({service:CONFIG.SERVICE.dOrderService,params:e.buyInfo,callback:function(e){t.orderInfoDetail=e,t.betNum=e.totalBetsNum,t.betMoney=e.totalOrderPrice}})})},generateOrder:function(){var t=this;return 0==t.resultList.length?(app.showPreloader("投注不能为空"),setTimeout(function(){app.hidePreloader()},1e3),!1):void utility.generateOrder({service:CONFIG.SERVICE.dOrderService,callback:function(t){mainView.router.loadPage("/app/view/order/pay.html")}})},init:function(){var t=this;utility.getSessionStorage("orderInfo")&&(utility.getSessionStorage("orderInfo").buyInfo.lotteryTypeId!=t.buyInfo.lotteryTypeId?(utility.setSessionStorage("resultList",null),utility.setSessionStorage("orderInfo",null),utility.setSessionStorage("generateOrder",null)):t.buyInfo=utility.getSessionStorage("orderInfo").buyInfo),utility.getSessionStorage("resultList")&&(t.resultList=utility.getSessionStorage("resultList"),t.resultList.length>0&&t.setOrderInfo()),t.getDigitalIssue()}},created:function(){var t=this;t.init(),$("body").find(".js-showMenu").on("click",function(){t.isShowMenu=!t.isShowMenu})}})})();