(function(){new Vue({el:"#js-message",data:{mescroll:null,userInfo:USERINFO,imageData:USERINFO.headImageUrl||"",messageInfo:{curPage:1,pageSize:5,type:0,readStatus:2,action:CONFIG.ACTION.getUserSiteMessageList},pageCount:1,listInfo:{type_0:[],type_1:[],type_2:[],type_3:[],type_4:[]},typeStr:{0:"全部",1:"优惠信息",2:"中奖通知",3:"活动",4:"其它"},readStatusStr:{0:"未读",1:"已读",2:"全部"},messageList:[]},watch:{"messageInfo.type":function(){var e=this;e.messageInfo.curPage=1,e.messageList=[],e.mescroll.destroy(),e.setMescrollAction()},"messageInfo.readStatus":function(){var e=this;e.messageInfo.curPage=1,e.messageList=[],e.mescroll.destroy(),e.setMescrollAction()}},methods:{userLogout:function(){utility.userLogout(function(){window.location.href=URL+"/index.html"})},getUserSiteMessageList:function(){var e=this;utility.interactWithServer({headerInfo:{userId:USERINFO?USERINFO.userId:"",userToken:USERINFO?USERINFO.userToken:"",actionUrl:utility.formatActionUrl(CONFIG.SERVICE.commonService,CONFIG.ACTION.getUserSiteMessageList,e.messageInfo)},url:CONFIG.HOST+CONFIG.SERVICE.commonService,dataObj:e.messageInfo,successCallback:function(s){200==s.code?(s.data.length>0&&e.messageInfo.curPage<=Math.ceil(s.count/e.messageInfo.pageSize)&&(e.messageInfo.curPage=e.messageInfo.curPage+1,e.messageList=s.data.concat(e.messageList)),e.mescroll.endBySize(e.messageList.length,s.count),e.mescroll.endSuccess()):(app.showPreloader(s.message),setTimeout(function(){app.hidePreloader()},1e3))}})},setMescrollAction:function(){var e=this;e.mescroll=new MeScroll("mescroll",{down:{callback:function(){e.getUserSiteMessageList()}},up:{callback:function(){e.getUserSiteMessageList()}}})}},created:function(){},mounted:function(){var e=this;e.setMescrollAction()}})})();