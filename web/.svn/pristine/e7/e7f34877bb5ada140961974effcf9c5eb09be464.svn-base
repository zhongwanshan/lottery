(function(){new Vue({el:"#js-pageInfo",data:{isAction:!1,tabType:0,userInfo:USERINFO,imageData:USERINFO.headImageUrl||"",paramInfo:{nickName:USERINFO.nickName,action:CONFIG.ACTION.modifyUserNickName},nickName:"",headImgAction:CONFIG.HOST+CONFIG.SERVICE.uploadService+"?fileType=headImg"},methods:{switchTab:function(e){var i=this;i.tabType=e},userLogout:function(){utility.userLogout(function(){window.location.replace(CONFIG.HOST+"/shop/view/user/login.html")})},doNikNameAction:function(){var e=this;if(1!=e.isAction){if(utility.checkLen(e.nickName,0))return void alert("昵称不能为空");if(e.nickName.length>10)return void alert("昵称长度过长");e.paramInfo.nickName=encodeURI(e.nickName),utility.interactWithServer({headerInfo:{appType:"2",userId:USERINFO?USERINFO.userId:"",userToken:USERINFO?USERINFO.userToken:"",actionUrl:utility.formatActionUrl(CONFIG.SERVICE.commonService,CONFIG.ACTION.modifyUserNickName,e.paramInfo)},url:CONFIG.HOST+CONFIG.SERVICE.commonService,dataObj:e.paramInfo,completeCallback:function(i,n){e.isAction=!1},successCallback:function(i){200==i.code?(e.userInfo.nickName=e.nickName,utility.setLocalStorage("userInfo",e.userInfo)):alert(i.message)}})}}},created:function(){var e=this;setTimeout(function(){e.userInfo=USERINFO},1e3)}})})();