(function(){new Vue({el:"#js-pageKingBi",data:{userInfo:USERINFO,coinInfoList:{},coinInfo:{pageSize:10,pageNum:1,beginDay:"",endDay:"",transType:"",transStatus:"",action:CONFIG.ACTION.getWalletTransList},pageCount:1,coinTypeList:CONFIG.TRANSTYPE,transStatus:CONFIG.TRANSSTATUS},methods:{userLogout:function(){utility.userLogout(function(){window.location.replace(CONFIG.HOST+"/shop/view/user/login.html")})},getUserCoinList:function(n){var e=this;1==n&&(e.coinInfo.pageNum=1),utility.interactWithServer({headerInfo:{appType:"2",userId:USERINFO?USERINFO.userId:"",userToken:USERINFO?USERINFO.userToken:"",actionUrl:utility.formatActionUrl(CONFIG.SERVICE.walletService,CONFIG.ACTION.getWalletTransList,e.coinInfo)},url:CONFIG.HOST+CONFIG.SERVICE.walletService,dataObj:e.coinInfo,successCallback:function(n){200==n.code?(e.coinListInfo=n,n.data.length>0?(e.pageCount=Math.ceil(n.count/e.coinInfo.pageSize),e.coinInfoList=n.data):e.coinInfoList=[]):alert(n.message)}})},getByPage:function(n){var e=this;e.coinInfo.pageNum=n,e.getUserCoinList()},getPreViewData:function(){var n=this;n.coinInfo.pageNum>1&&(n.coinInfo.pageNum=n.coinInfo.pageNum-1,n.getUserCoinList())},getNextData:function(){var n=this;n.coinInfo.pageNum<n.pageCount&&(n.coinInfo.pageNum=n.coinInfo.pageNum+1,n.getUserCoinList())}},created:function(){var n=this;n.getUserCoinList(),setTimeout(function(){n.userInfo=USERINFO},1e3)},mounted:function(){var n=this;$("#starTime").fdatepicker({format:"yyyy-mm-dd"}).on("changeDate",function(e){n.coinInfo.beginDay=$("#starTime").val()}),$("#endTime").fdatepicker({format:"yyyy-mm-dd"}).on("changeDate",function(e){n.coinInfo.endDay=$("#endTime").val()})}})})();