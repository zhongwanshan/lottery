(function(){new Vue({el:"#js-pageKingBi",data:{userInfo:USERINFO,coinInfoList:{},coinInfo:{transType:"",pageSize:10,pageNum:1,beginDay:"",endDay:"",coinTransType:"",action:CONFIG.ACTION.getUserCoinList},pageCount:1,coinTypeList:[{id:0,type:"存入"},{id:1,type:"转移"},{id:2,type:"消费"},{id:4,type:"过期失效"}]},methods:{userLogout:function(){utility.userLogout(function(){window.location.replace(CONFIG.HOST+"/www/index.html")})},getUserCoinList:function(e){var n=this;1==e&&(n.coinInfo.pageNum=1),utility.interactWithServer({headerInfo:{appType:"2",userId:USERINFO?USERINFO.userId:"",userToken:USERINFO?USERINFO.userToken:"",actionUrl:utility.formatActionUrl(CONFIG.SERVICE.walletService,CONFIG.ACTION.getUserCoinList,n.coinInfo)},url:CONFIG.HOST+CONFIG.SERVICE.walletService,dataObj:n.coinInfo,successCallback:function(e){200==e.code?(n.coinListInfo=e,e.data.length>0?(n.pageCount=Math.ceil(e.count/n.coinInfo.pageSize),n.coinInfoList=e.data):n.coinInfoList=[]):alert(e.message)}})},getByPage:function(e){var n=this;n.coinInfo.pageNum=e,n.getUserCoinList()},getPreViewData:function(){var e=this;e.coinInfo.pageNum>1&&(e.coinInfo.pageNum=e.coinInfo.pageNum-1,e.getUserCoinList())},getNextData:function(){var e=this;e.coinInfo.pageNum<e.pageCount&&(e.coinInfo.pageNum=e.coinInfo.pageNum+1,e.getUserCoinList())}},created:function(){var e=this;e.getUserCoinList()},mounted:function(){var e=this;$("#starTime").fdatepicker({format:"yyyy-mm-dd"}).on("changeDate",function(n){e.coinInfo.beginDay=$("#starTime").val()}),$("#endTime").fdatepicker({format:"yyyy-mm-dd"}).on("changeDate",function(n){e.coinInfo.endDay=$("#endTime").val()})}})})();