var utility=function(e){return e.getQueryParams=function(){for(var e=location.search.length>0?location.search.substring(1):"",t={},a=e.split("&"),n=null,o=null,r=null,i=0,c=a.length;i<c;i++)n=a[i].split("="),o=n[0],r=n[1],t[o]=r;return t},e.setcookie=function(e,t){var a=30,n=new Date;n.setTime(n.getTime()+24*a*60*60*1e3),document.cookie=e+"="+escape(t)+";expires="+n.toGMTString()},e.getcookie=function(e){var t=document.cookie.match(new RegExp("(^| )"+e+"=([^;]*)(;|$)"));return null!=t?t[2]:""},e.delcookie=function(e){var t=new Date;t.setTime(t.getTime()-1);var a=this.getcookie(e);null!=a&&(document.cookie=e+"="+a+";expires="+t.toGMTString())},e.setSessionStorage=function(e,t){window.sessionStorage.setItem(e,JSON.stringify(t))},e.getSessionStorage=function(e){return JSON.parse(window.sessionStorage.getItem(e))},e.cleanSessionStorage=function(){window.sessionStorage.clear()},e.setLocalStorage=function(e,t){window.localStorage.setItem(e,JSON.stringify(t))},e.getLocalStorage=function(e){return JSON.parse(window.localStorage.getItem(e))},e.cleanLocalStorage=function(){window.localStorage.clear()},e.checkLen=function(e,t){return e.length<=t},e.checkName=function(e){return!!e.match(/[\u4E00-\u9FA5]{2,5}(?:·[\u4E00-\u9FA5]{2,5})*/)},e.checkPhone=function(e){return!!e.match(/^(13|14|15|17|18)[0-9]{8}[0-9]$/)},e.checkPass=function(e){return!!e.match(/^[a-z0-9_-]{6,18}$/)},e.checkNumber=function(e){return!!e.match(/^(1[0-2]|0?[1-9])(0?[1-9]|[1-2][0-9]|3[0-1])$/)},e.checkIdentityNo=function(e){var t=/^[1-9]\d{7}((0\d)|(1[0-2]))(([0|1|2]\d)|3[0-1])\d{3}$/,a=/^[1-9]\d{5}[1-9]\d{3}((0\d)|(1[0-2]))(([0|1|2]\d)|3[0-1])\d{3}([0-9]|X)$/,n=!1;return 15==e.length&&e.match(t)?n=!0:18==e.length&&e.match(a)&&(n=!0),n},e.getCurrentTimeInfo=function(e){var t=e?new Date(e):new Date,a=t.getFullYear(),n=t.getMonth(),e=t.getDate(),o=t.getDay(),r=t.getHours(),i=t.getMinutes(),c=t.getSeconds(),p=["星期日","星期一","星期二","星期三","星期四","星期五","星期六"];return{year:a,month:n+1,date:e,hour:r,min:i,second:c,weekDay:p[o]}},e.convertImgToBase64=function(e,t,a){var n=document.createElement("CANVAS"),o=n.getContext("2d"),r=new Image;r.crossOrigin="Anonymous",r.onload=function(){n.height=r.height,n.width=r.width,o.drawImage(r,0,0);var e=n.toDataURL(a||"image/png");t.call(this,e),n=null},r.src=e},e.setPickerHeader=function(e){return'<header class="bar bar-nav">              <button class="button button-link pull-right close-picker">确定</button>              <h1 class="title">'+e.title+"</h1>              </header>"},e.formatDate=function(e){var t=new Date(parseInt(e)).toLocaleString().replace(/年|月/g,".").replace(/日/g," "),a=t.split(" ")[0].split("/"),n=parseInt(a[0],10),o=parseInt(a[1],10),r=parseInt(a[2],10);return o<10&&(o="0"+o),r<10&&(r="0"+r),n+"年"+o+"月"+r+"日"},e.formatData=function(e){var t=e.data,a=t.contents||t.rows;e.type;if(a.length>0){for(var n=0,o=a.length;n<o;n++){var r=a[n].icon;r.indexOf("http://")==-1&&(r=e.host+"/uploads/"+r),e.wrap.push({contentId:a[n].content_id,categoryId:a[n].category_id,categoryCode:t.code,paperId:a[n].paper_id||"",videoSrc:a[n].video||"",img:'<img src="'+r+'" />',title:a[n].title,isLink:a[n].link.length>0,link:a[n].link,summary:a[n].summary,time:a[n].update_date.split(" ")[0],headerTitle:t.name})}e.callback&&e.callback(e.data)}},e.interactWithServer=function(e){$.ajax({type:e.method||"POST",url:e.url,async:e.async||!0,dataType:"json",timeout:18e3,headers:{userId:e.headerInfo.userId||"",userToken:e.headerInfo.userToken||"",timestamp:Date.parse(new Date),actionUrl:e.headerInfo.actionUrl||"",version:"100",appType:e.headerInfo.appType||"1",signStr:md5((e.headerInfo.userToken||"")+(e.headerInfo.userId||"")+Date.parse(new Date)+(e.headerInfo.actionUrl||"")+"100"+JSON.stringify(e.dataObj||""))},contentType:e.contentType||"application/x-www-form-urlencoded",data:e.dataObj||{},beforeSend:function(t){e.beforeSendCallback&&e.beforeSendCallback(t)},complete:function(t,a){e.completeCallback&&e.completeCallback(t,a)},success:function(t){e.successCallback&&e.successCallback(t)},error:function(t,a,n){e.errorCallback&&e.errorCallback(t,a,n)}})},e.formatActionUrl=function(e,t,a){return e+"?action="+t+"&"+($.serializeObject?$.serializeObject(a):$.param(a))},e.generateRandomData=function(e){for(var t=["0","1","2","3","4","5","6","7","8","9"],a="",n=0;n<e;n++){var o=Math.ceil(10*Math.random());a+=t[o]}return a},e.getDigitalPrizeData=function(t){e.interactWithServer({headerInfo:{appType:t.appType||"1",userId:"undefined"!=typeof USERINFO&&USERINFO?USERINFO.userId:"",userToken:"undefined"!=typeof USERINFO&&USERINFO?USERINFO.userToken:"",actionUrl:e.formatActionUrl(CONFIG.SERVICE.lotteryService,t.action||CONFIG.ACTION.getDigitalPrizeData,{fetchNum:t.fetchNum,action:t.action||CONFIG.ACTION.getDigitalPrizeData,lottoId:t.lottoId})},url:CONFIG.HOST+CONFIG.SERVICE.lotteryService,dataObj:{action:t.action||CONFIG.ACTION.getDigitalPrizeData,lottoId:t.lottoId,fetchNum:t.fetchNum},beforeSendCallback:function(){"undefined"!=typeof app&&app?app.showIndicator():""},completeCallback:function(e,t){"undefined"!=typeof app&&app?app.hideIndicator():""},successCallback:function(e){200==e.code?!!t.callback&&t.callback(e):("undefined"!=typeof app&&app?app.showPreloader(e.message||e.resultTips):alert(e.message||e.resultTips),setTimeout(function(){"undefined"!=typeof app&&app?app.hidePreloader():""},1e3))}})},e.getDigitalIssue=function(t){e.interactWithServer({headerInfo:{appType:t.appType||"1",userId:"undefined"!=typeof USERINFO&&USERINFO?USERINFO.userId:"",userToken:"undefined"!=typeof USERINFO&&USERINFO?USERINFO.userToken:"",actionUrl:e.formatActionUrl(CONFIG.SERVICE.lotteryService,CONFIG.ACTION.getDigitalIssue,{action:CONFIG.ACTION.getDigitalIssue,lottoId:t.lottoId})},url:CONFIG.HOST+CONFIG.SERVICE.lotteryService,dataObj:{action:CONFIG.ACTION.getDigitalIssue,lottoId:t.lottoId},beforeSendCallback:function(){"undefined"!=typeof app&&app?app.showIndicator():""},completeCallback:function(e,t){"undefined"!=typeof app&&app?app.hideIndicator():""},successCallback:function(e){200==e.code?!!t.callback&&t.callback(e):("undefined"!=typeof app&&app?app.showPreloader(e.message||e.resultTips):alert(e.message||e.resultTips),setTimeout(function(){"undefined"!=typeof app&&app?app.hidePreloader():""},1e3))}})},e.geFbMatchScoreData=function(t){e.interactWithServer({headerInfo:{appType:t.appType||"1",userId:"undefined"!=typeof USERINFO&&USERINFO?USERINFO.userId:"",userToken:"undefined"!=typeof USERINFO&&USERINFO?USERINFO.userToken:"",actionUrl:e.formatActionUrl(CONFIG.SERVICE.lotteryService,CONFIG.ACTION.geFbMatchScore,{action:CONFIG.ACTION.geFbMatchScore,mid:t.mid,num:t.num})},url:CONFIG.HOST+CONFIG.SERVICE.lotteryService,dataObj:{action:CONFIG.ACTION.geFbMatchScore,mid:t.mid,num:t.num},beforeSendCallback:function(){"undefined"!=typeof app&&app?app.showIndicator():""},completeCallback:function(e,t){"undefined"!=typeof app&&app?app.hideIndicator():""},successCallback:function(e){200==e.code?!!t.callback&&t.callback(e):("undefined"!=typeof app&&app?app.showPreloader(e.message||e.resultTips):alert(e.message||e.resultTips),setTimeout(function(){"undefined"!=typeof app&&app?app.hidePreloader():""},1e3))}})},e.geBkBlendMatches=function(t){e.interactWithServer({headerInfo:{appType:t.appType||"1",userId:"undefined"!=typeof USERINFO&&USERINFO?USERINFO.userId:"",userToken:"undefined"!=typeof USERINFO&&USERINFO?USERINFO.userToken:"",actionUrl:e.formatActionUrl(CONFIG.SERVICE.lotteryService,CONFIG.ACTION.geBkBlendMatches,{action:CONFIG.ACTION.geBkBlendMatches,matchDay:t.matchDay,type:t.type})},url:CONFIG.HOST+CONFIG.SERVICE.lotteryService,dataObj:{action:CONFIG.ACTION.geBkBlendMatches,matchDay:t.matchDay,type:t.type},beforeSendCallback:function(){"undefined"!=typeof app&&app?app.showIndicator():""},completeCallback:function(e,t){"undefined"!=typeof app&&app?app.hideIndicator():""},successCallback:function(e){200==e.code?!!t.callback&&t.callback(e):("undefined"!=typeof app&&app?app.showPreloader(e.message||e.resultTips):alert(e.message||e.resultTips),setTimeout(function(){"undefined"!=typeof app&&app?app.hidePreloader():""},1e3))}})},e.geRecentBkBlendIssueNo=function(t){e.interactWithServer({headerInfo:{appType:t.appType||"1",userId:"undefined"!=typeof USERINFO&&USERINFO?USERINFO.userId:"",userToken:"undefined"!=typeof USERINFO&&USERINFO?USERINFO.userToken:"",actionUrl:e.formatActionUrl(CONFIG.SERVICE.lotteryService,CONFIG.ACTION.geRecentBkBlendIssueNo,{action:CONFIG.ACTION.geRecentBkBlendIssueNo,recent:t.recent})},url:CONFIG.HOST+CONFIG.SERVICE.lotteryService,dataObj:{action:CONFIG.ACTION.geRecentBkBlendIssueNo,recent:t.recent},beforeSendCallback:function(){"undefined"!=typeof app&&app?app.showIndicator():""},completeCallback:function(e,t){"undefined"!=typeof app&&app?app.hideIndicator():""},successCallback:function(e){200==e.code?!!t.callback&&t.callback(e):("undefined"!=typeof app&&app?app.showPreloader(e.message||e.resultTips):alert(e.message||e.resultTips),setTimeout(function(){"undefined"!=typeof app&&app?app.hidePreloader():""},1e3))}})},e.geRecentFbTraditionIssueNo=function(t){e.interactWithServer({headerInfo:{appType:t.appType||"1",userId:"undefined"!=typeof USERINFO&&USERINFO?USERINFO.userId:"",userToken:"undefined"!=typeof USERINFO&&USERINFO?USERINFO.userToken:"",actionUrl:e.formatActionUrl(CONFIG.SERVICE.lotteryService,CONFIG.ACTION.geRecentFbTraditionIssueNo,{action:CONFIG.ACTION.geRecentFbTraditionIssueNo,recent:t.recent})},url:CONFIG.HOST+CONFIG.SERVICE.lotteryService,dataObj:{action:CONFIG.ACTION.geRecentFbTraditionIssueNo,recent:t.recent},beforeSendCallback:function(){"undefined"!=typeof app&&app?app.showIndicator():""},completeCallback:function(e,t){"undefined"!=typeof app&&app?app.hideIndicator():""},successCallback:function(e){200==e.code?!!t.callback&&t.callback(e):("undefined"!=typeof app&&app?app.showPreloader(e.message||e.resultTips):alert(e.message||e.resultTips),setTimeout(function(){"undefined"!=typeof app&&app?app.hidePreloader():""},1e3))}})},e.geFbTraditionMatches=function(t){e.interactWithServer({headerInfo:{appType:t.appType||"1",userId:"undefined"!=typeof USERINFO&&USERINFO?USERINFO.userId:"",userToken:"undefined"!=typeof USERINFO&&USERINFO?USERINFO.userToken:"",actionUrl:e.formatActionUrl(CONFIG.SERVICE.lotteryService,CONFIG.ACTION.geFbTraditionMatches,{action:CONFIG.ACTION.geFbTraditionMatches,num:t.num,type:t.type})},async:t.async||!0,url:CONFIG.HOST+CONFIG.SERVICE.lotteryService,dataObj:{action:CONFIG.ACTION.geFbTraditionMatches,num:t.num,type:t.type},beforeSendCallback:function(){"undefined"!=typeof app&&app?app.showIndicator():""},completeCallback:function(e,t){"undefined"!=typeof app&&app?app.hideIndicator():""},successCallback:function(e){200==e.code?!!t.callback&&t.callback(e):("undefined"!=typeof app&&app?app.showPreloader(e.message||e.resultTips):alert(e.message||e.resultTips),setTimeout(function(){"undefined"!=typeof app&&app?app.hidePreloader():""},1e3))}})},e.genreateArr=function(e){for(var t=[],a=1,n=e;a<=n;a++)a<=9?t.push("0"+a):t.push(""+a);return t},e.getArrByNum=function(e,t,a){for(var n=[],o=t>e.length?e.length:t,r=0;r<o;r++)(function(t){var o=Math.ceil(Math.random()*e.length-1);a?n.push(parseInt(e.splice(o,1)[0],10)):n.push(e.splice(o,1)[0])})(r);return n},e.getCombination=function(t,a){return e.getFactorial(t)/(e.getFactorial(a)*e.getFactorial(t-a))},e.getFactorial=function(e){if(e<0)return-1;if(0===e||1===e)return 1;for(var t=e-1;t>=1;t--)e*=t;return e},e.getImgCode=function(t){e.interactWithServer({headerInfo:{userId:"undefined"!=typeof USERINFO&&USERINFO?USERINFO.userId:"",userToken:"undefined"!=typeof USERINFO&&USERINFO?USERINFO.userToken:"",actionUrl:e.formatActionUrl(CONFIG.SERVICE.imageService,CONFIG.ACTION.getImgCode,{action:CONFIG.ACTION.getImgCode})},url:CONFIG.HOST+CONFIG.SERVICE.imageService,dataObj:{action:CONFIG.ACTION.getImgCode},successCallback:function(e){200==e.code&&!!t&&t(e)}})},e.checkImgCode=function(t,a,n){e.interactWithServer({headerInfo:{userId:"undefined"!=typeof USERINFO&&USERINFO?USERINFO.userId:"",userToken:"undefined"!=typeof USERINFO&&USERINFO?USERINFO.userToken:"",actionUrl:e.formatActionUrl(CONFIG.SERVICE.imageService,CONFIG.ACTION.validImgCode,{reqId:t,imgCode:a,action:CONFIG.ACTION.validImgCode})},url:CONFIG.HOST+CONFIG.SERVICE.imageService,dataObj:{reqId:t,imgCode:a,action:CONFIG.ACTION.validImgCode},successCallback:function(e){200==e.code?!!n&&n():("undefined"!=typeof app&&app?app.showPreloader(e.message):alert(e.message),setTimeout(function(){"undefined"!=typeof app&&app?app.hidePreloader():""},1e3))}})},e.getSmsCode=function(t,a,n,o,r,i){e.interactWithServer({headerInfo:{userId:"undefined"!=typeof USERINFO&&USERINFO?USERINFO.userId:"",userToken:"undefined"!=typeof USERINFO&&USERINFO?USERINFO.userToken:"",actionUrl:e.formatActionUrl(CONFIG.SERVICE.commonService,CONFIG.ACTION.sendSms,{phone:n,authType:o,action:CONFIG.ACTION.sendSms,reqId:t,imgCode:a})},url:CONFIG.HOST+CONFIG.SERVICE.commonService,dataObj:{phone:n,authType:o,action:CONFIG.ACTION.sendSms,reqId:t,imgCode:a},beforeSendCallback:function(){"undefined"!=typeof app&&app?app.showIndicator():""},completeCallback:function(e,t){"undefined"!=typeof app&&app?app.hideIndicator():"",!!i&&i()},successCallback:function(e){200==e.code?!!r&&r(e):("undefined"!=typeof app&&app?app.showPreloader(e.message):alert(e.message),setTimeout(function(){"undefined"!=typeof app&&app?app.hidePreloader():""},1e3))}})},e.setDigitalOrderInfo=function(t,a,n,o,r){for(var i=t,c=[],p=0,d=i.resultList.length;p<d;p++)c.push(o(i,p));i.buyInfo.betDetail=c.join("#"),e.setSessionStorage("orderInfo",{buyInfo:i.buyInfo,betNum:i.betNum,betMoney:i.betMoney,lottoid:a,lottoName:n}),!!r&&r()},e.getUserInfo=function(t){e.interactWithServer({async:!1,headerInfo:{appType:t.appType||"1",userId:"undefined"!=typeof USERINFO&&USERINFO?USERINFO.userId:"",userToken:"undefined"!=typeof USERINFO&&USERINFO?USERINFO.userToken:"",actionUrl:e.formatActionUrl(CONFIG.SERVICE.commonService,CONFIG.ACTION.getUserInfo,{action:CONFIG.ACTION.getUserInfo})},url:CONFIG.HOST+CONFIG.SERVICE.commonService,dataObj:{action:CONFIG.ACTION.getUserInfo},successCallback:function(e){!!t.callback&&t.callback(e.data)}})},e.getShopOrderStat=function(t){e.interactWithServer({async:!1,headerInfo:{appType:2,userId:"undefined"!=typeof USERINFO&&USERINFO?USERINFO.userId:"",userToken:"undefined"!=typeof USERINFO&&USERINFO?USERINFO.userToken:"",actionUrl:e.formatActionUrl(CONFIG.SERVICE.commonOrderService,CONFIG.ACTION.getShopOrderStat,{sysOpStr:"sss@2018",action:CONFIG.ACTION.getShopOrderStat})},url:CONFIG.HOST+CONFIG.SERVICE.commonOrderService,dataObj:{sysOpStr:"sss@2018",action:CONFIG.ACTION.getShopOrderStat},successCallback:function(e){200==e.code&&!!t&&t(e)}})},e.userLogout=function(t){e.interactWithServer({headerInfo:{appType:"2",userId:"undefined"!=typeof USERINFO&&USERINFO?USERINFO.userId:"",userToken:"undefined"!=typeof USERINFO&&USERINFO?USERINFO.userToken:"",actionUrl:e.formatActionUrl(CONFIG.SERVICE.commonService,CONFIG.ACTION.userLogout,{action:CONFIG.ACTION.userLogout})},url:CONFIG.HOST+CONFIG.SERVICE.commonService,dataObj:{action:CONFIG.ACTION.userLogout},successCallback:function(a){200==a.code?(e.setLocalStorage("userInfo",null),!!t&&t()):alert(a.message)}})},e.findByCodeWithContents=function(e){$.ajax({type:"POST",url:CONFIG.HOST+CONFIG.CMS.findByCodeWithContents,dataType:"json",timeout:18e3,contentType:"application/x-www-form-urlencoded",data:{code:e.code},success:function(t){1==t.head.status?!!e.callback&&e.callback(t):("undefined"!=typeof app&&app?app.showPreloader(t.message):alert(t.message),setTimeout(function(){"undefined"!=typeof app&&app?app.hidePreloader():""},1e3))},error:function(t,a,n){e.errorCallback&&e.errorCallback(t,a,n)}})},e.findByContentId=function(e){$.ajax({type:"POST",url:CONFIG.HOST+CONFIG.CMS.findByContentId,dataType:"json",timeout:18e3,contentType:"application/x-www-form-urlencoded",data:{content_id:e.contentId},success:function(t){1==t.head.status?!!e.callback&&e.callback(t):("undefined"!=typeof app&&app?app.showPreloader(t.message):alert(t.message),setTimeout(function(){"undefined"!=typeof app&&app?app.hidePreloader():""},1e3))},error:function(t,a,n){e.errorCallback&&e.errorCallback(t,a,n)}})},e.previewOrder=function(t){e.interactWithServer({async:!1,headerInfo:{appType:t.appType||"1",userId:"undefined"!=typeof USERINFO&&USERINFO?USERINFO.userId:"",userToken:"undefined"!=typeof USERINFO&&USERINFO?USERINFO.userToken:"",actionUrl:e.formatActionUrl(t.service,t.params.action,t.params)},url:CONFIG.HOST+t.service,dataObj:t.params,completeCallback:function(e,t){"undefined"!=typeof app&&app?app.hideIndicator():""},successCallback:function(e){if(200==e.code)!!t.callback&&t.callback(e.data);else{if(4101==e.code)return void("undefined"!=typeof app&&app?app.confirm("请先登录",function(){mainView.router.load({url:"view/user/login.html",pushState:!1})}):alert(e.message));"undefined"!=typeof app&&app?app.showPreloader(e.message):alert(e.message),setTimeout(function(){"undefined"!=typeof app&&app?app.hidePreloader():""},1e3),!!t.otherCallback&&t.otherCallback(e)}}})},e.generateOrder=function(t){var a=e.getSessionStorage("orderInfo");a.buyInfo.action=CONFIG.ACTION.saveOrder,a.buyInfo.type=2,delete a.buyInfo.digitalBetType,delete a.buyInfo.dBetFunction,"undefined"!=typeof app&&app?app.showIndicator():"",e.previewOrder({appType:t.appType||"1",service:t.service,params:a.buyInfo,callback:function(a){e.setSessionStorage("generateOrder",a),!!t.callback&&t.callback(a)}})},e.duplicate=function(e,t){for(var a=e,n=t,o=[],r=0;r<a.length;r++)(function(e){n.indexOf(a[e])==-1&&o.push(a[e])})(r);return o},e.leftTimer=function(e,t){var a=e-t,n=parseInt(a/1e3/60/60/24,10),o=parseInt(a/1e3/60/60%24,10),r=parseInt(a/1e3/60%60,10),i=parseInt(a/1e3%60,10);return{days:n<9&&n>0?"0"+n:n,hours:o<9&&n>0?"0"+o:o,minutes:r<9&&r>0?"0"+r:r,seconds:i<9&&i>0?"0"+i:i}},e.setiScroll=function(e){setTimeout(function(){var t=parseFloat(window.innerHeight);$("#"+e).length&&($("#"+e).css({height:t-155+"px"}),new iScroll(e,{hScroll:!1,lockDirection:!0,scrollX:!1,scrollbarClass:"iScroll"}))},200)},e}(utility||{});