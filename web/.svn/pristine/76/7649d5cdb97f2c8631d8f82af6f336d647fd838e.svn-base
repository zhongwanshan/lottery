(function(){new Vue({el:"#js-pageInfo",data:{userInfo:USERINFO,isAction:!1,imageData:"",paramInfo:{nickName:"",action:CONFIG.ACTION.modifyUserNickName},nickName:""},methods:{doNikNameAction:function(){var e=this;if(1!=e.isAction){if(utility.checkLen(e.nickName,0))return app.showPreloader("昵称不能为空"),void setTimeout(function(){app.hidePreloader()},1e3);if(e.nickName.length>10)return app.showPreloader("昵称长度过长"),void setTimeout(function(){app.hidePreloader()},1e3);e.paramInfo.nickName=encodeURI(e.nickName),utility.interactWithServer({headerInfo:{userId:USERINFO?USERINFO.userId:"",userToken:USERINFO?USERINFO.userToken:"",actionUrl:utility.formatActionUrl(CONFIG.SERVICE.commonService,CONFIG.ACTION.modifyUserNickName,e.paramInfo)},url:CONFIG.HOST+CONFIG.SERVICE.commonService,dataObj:e.paramInfo,beforeSendCallback:function(){app.showIndicator()},completeCallback:function(i,o){app.hideIndicator(),e.isAction=!1},successCallback:function(i){200==i.code?(e.userInfo.nickName=e.nickName,utility.setLocalStorage("userInfo",e.userInfo),app.closeModal()):(app.showPreloader(i.message),setTimeout(function(){app.hidePreloader()},1e3))}})}},getImageByType:function(e){"undefined"!=typeof jsBridge&&jsBridge.cpApi(8,JSON.stringify({source:e,isSquare:1}),function(e){}.toString())},doHeadImgAction:function(){var e=this;if(1!=e.isAction)return utility.checkLen(e.imageData.length,0)?(app.showPreloader("请选择图片"),void setTimeout(function(){app.hidePreloader()},1e3)):void utility.interactWithServer({headerInfo:{userId:USERINFO?USERINFO.userId:"",userToken:USERINFO?USERINFO.userToken:"",actionUrl:utility.formatActionUrl(CONFIG.SERVICE.commonService,CONFIG.ACTION.modifyUserPhoto,{headImgUrl:"",imageData:e.imageData,action:CONFIG.ACTION.modifyUserPhoto})},url:CONFIG.HOST+CONFIG.SERVICE.commonService,dataObj:{headImgUrl:"",imageData:e.imageData,action:CONFIG.ACTION.modifyUserPhoto},beforeSendCallback:function(){$.showIndicator()},completeCallback:function(){$.hideIndicator(),e.isAction=!1},successCallback:function(e){200==e.code||(app.showPreloader(e.message),setTimeout(function(){app.hidePreloader()},1e3))}})}},created:function(){}})})();