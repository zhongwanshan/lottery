(function(){new Vue({el:"#js-pageKingBi",data:{userInfo:USERINFO,coinList:[],coinInfo:{transType:"",curPage:0,action:CONFIG.ACTION.getUserCoinList,pageSize:20,pageNum:1},coinTypeList:[{id:0,type:"存入"},{id:1,type:"转移"},{id:2,type:"消费"},{id:4,type:"过期失效"}]},watch:{"coinInfo.transType":function(e){var n=this;n.coinInfo.pageNum=1,n.coinInfo.curPage=0,n.coinList=[],n.getUserCoinList()}},methods:{getUserCoinList:function(){var e=this;utility.interactWithServer({headerInfo:{appType:"1",userId:USERINFO?USERINFO.userId:"",userToken:USERINFO?USERINFO.userToken:"",actionUrl:utility.formatActionUrl(CONFIG.SERVICE.walletService,CONFIG.ACTION.getUserCoinList,e.coinInfo)},url:CONFIG.HOST+CONFIG.SERVICE.walletService,dataObj:e.coinInfo,beforeSendCallback:function(){app.showIndicator()},completeCallback:function(e,n){app.hideIndicator()},successCallback:function(n){200==n.code?(n.data.length>0&&e.coinInfo.pageNum<=Math.ceil(n.count/e.coinInfo.pageSize)&&(e.coinInfo.pageNum=e.coinInfo.pageNum+1,e.coinInfo.curPage=e.coinInfo.curPage+1,e.coinList=n.data.concat(e.coinList)),e.mescroll.endBySize(e.coinList.length,n.count),e.mescroll.endSuccess()):(app.showPreloader(n.message),setTimeout(function(){app.hidePreloader()},1e3))}})}},created:function(){},mounted:function(){var e=this;e.mescroll=new MeScroll("mescroll",{down:{callback:function(){e.getUserCoinList()}}})}})})();