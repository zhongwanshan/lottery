(function(){new Vue({el:"#js-pageQxc",data:{offTime:"",currentIssueName:"",buyInfo:{action:CONFIG.ACTION.previewOrder,type:0,lotteryTypeId:"15",issueNo:"",digitalBetType:1,dBetFunction:1,betDetail:"",extraAdd:0,multipleNum:1,followFlag:0,followIssueNum:"",followStopFor:0},isCheck:!0,dBetFunText:CONFIG.DBETFUNCTION.d_1,betNum:0,betMoney:0,oneList:[],twoList:[],threeList:[],fourList:[],fiveList:[],sixList:[],sevenList:[],resultList:[],orderInfoDetail:{},isShowMenu:!1},watch:{"buyInfo.dBetFunction":function(t){var e=this;e.dBetFunText=CONFIG.DBETFUNCTION["d_"+t],e.emptySelect(),utility.setiScroll()},"buyInfo.digitalBetType":function(t){utility.setiScroll()},"buyInfo.multipleNum":function(t){var e=this;t<0&&(e.buyInfo.multipleNum=1),e.resultList.length>0&&t>0&&e.setOrderInfo()},"buyInfo.followFlag":function(t){var e=this;0==t?e.buyInfo.followIssueNum="":1==t&&(e.buyInfo.followIssueNum=e.buyInfo.issueNo)},"buyInfo.followFlag":function(t){var e=this;0==t?e.buyInfo.followIssueNum="":1==t&&(e.buyInfo.followIssueNum=e.buyInfo.issueNo)}},methods:{showMenu:function(){var t=this;t.isShowMenu=!t.isShowMenu},clearAll:function(){var t=this;t.emptySelect(),t.resultList=[],t.orderInfoDetail={},t.betNum=0,t.betMoney=0,utility.setSessionStorage("resultList",null),utility.setSessionStorage("orderInfo",null),utility.setiScroll()},emptySelect:function(){var t=this;t.oneList=[],t.twoList=[],t.threeList=[],t.fourList=[],t.fiveList=[],t.sixList=[],t.sevenList=[]},randomBuyTime:function(t){for(var e=this,i=0;i<t;i++)(function(t){setTimeout(function(){var t=utility.genreateArr(9),i=utility.getArrByNum(t,1,1),s=utility.getArrByNum(t,1,1),o=utility.getArrByNum(t,1,1),r=utility.getArrByNum(t,1,1),u=utility.getArrByNum(t,1,1),n=utility.getArrByNum(t,1,1),l=utility.getArrByNum(t,1,1);e.oneList=i,e.twoList=s,e.threeList=o,e.fourList=r,e.fiveList=u,e.sixList=n,e.sevenList=l,e.addToResult()},500)})(i)},validate:function(){var t=this;return 0==t.oneList.length?(app.showPreloader("第一位至少选择1个"),setTimeout(function(){app.hidePreloader()},1e3),!1):0==t.twoList.length?(app.showPreloader("第二位至少选择1个"),setTimeout(function(){app.hidePreloader()},1e3),!1):0==t.threeList.length?(app.showPreloader("第三位至少选择1个"),setTimeout(function(){app.hidePreloader()},1e3),!1):0==t.fourList.length?(app.showPreloader("第四位至少选择1个"),setTimeout(function(){app.hidePreloader()},1e3),!1):0==t.fiveList.length?(app.showPreloader("第五位至少选择1个"),setTimeout(function(){app.hidePreloader()},1e3),!1):0==t.sixList.length?(app.showPreloader("第六位至少选择1个"),setTimeout(function(){app.hidePreloader()},1e3),!1):0!=t.sevenList.length||(app.showPreloader("第七位至少选择1个"),setTimeout(function(){app.hidePreloader()},1e3),!1)},addToResult:function(){var t=this;0!=t.validate()&&(t.resultList.push({digitalBetType:t.buyInfo.digitalBetType,dBetFunction:t.buyInfo.dBetFunction,oneList:t.oneList,twoList:t.twoList,threeList:t.threeList,fourList:t.fourList,fiveList:t.fiveList,sixList:t.sixList,sevenList:t.sevenList}),t.emptySelect(),utility.setSessionStorage("resultList",t.resultList),utility.setiScroll(),t.setOrderInfo())},deleteResult:function(t){var e=this;e.resultList.splice(t,1),e.orderInfoDetail.digitalOrderItems.splice(t,1),utility.setSessionStorage("resultList",e.resultList),0==e.resultList.length?(e.betNum=0,e.betMoney=0):e.setOrderInfo()},getDigitalIssue:function(){var t=this;utility.getDigitalIssue({lottoId:t.buyInfo.lotteryTypeId,appType:1,callback:function(e){t.buyInfo.issueNo=e.data[0].currentIssueNo,t.currentIssueName=e.data[0].currentIssueName,t.offTime=e.data[0].offTime,utility.setiScroll()}})},setOrderInfo:function(){var t=this;utility.setDigitalOrderInfo(t,t.buyInfo.lotteryTypeId,"七星彩",function(e,i){return t.resultList[i].digitalBetType+"|"+t.resultList[i].dBetFunction+"||"+t.resultList[i].oneList.join("")+","+t.resultList[i].twoList.join("")+","+t.resultList[i].threeList.join("")+","+t.resultList[i].fourList.join("")+","+t.resultList[i].fiveList.join("")+","+t.resultList[i].sixList.join("")+","+t.resultList[i].sevenList.join("")+"||"},function(){var e=utility.getSessionStorage("orderInfo");utility.previewOrder({service:CONFIG.SERVICE.dOrderService,params:e.buyInfo,callback:function(e){t.orderInfoDetail=e,t.betNum=e.totalBetsNum,t.betMoney=e.totalOrderPrice}})})},generateOrder:function(){var t=this;return 0==t.resultList.length?(app.showPreloader("投注不能为空"),setTimeout(function(){app.hidePreloader()},1e3),!1):void utility.generateOrder({service:CONFIG.SERVICE.dOrderService,callback:function(t){mainView.router.loadPage("/app/view/order/pay.html")}})},init:function(){var t=this;utility.getSessionStorage("orderInfo")&&(utility.getSessionStorage("orderInfo").buyInfo.lotteryTypeId!=t.buyInfo.lotteryTypeId?(utility.setSessionStorage("resultList",null),utility.setSessionStorage("orderInfo",null),utility.setSessionStorage("generateOrder",null)):t.buyInfo=utility.getSessionStorage("orderInfo").buyInfo),utility.getSessionStorage("resultList")&&(t.resultList=utility.getSessionStorage("resultList"),t.resultList.length>0&&t.setOrderInfo()),t.getDigitalIssue()}},created:function(){var t=this;t.init(),$("body").find(".js-showMenu").on("click",function(){t.isShowMenu=!t.isShowMenu})}})})();