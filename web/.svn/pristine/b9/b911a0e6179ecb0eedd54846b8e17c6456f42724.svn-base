(function(){new Vue({el:"#js-buyGd115",data:{offTime:"",currentIssueName:"",buyInfo:{action:CONFIG.ACTION.previewOrder,type:0,lotteryTypeId:"6",issueNo:"",digitalBetType:105,dBetFunction:1,betDetail:"",extraAdd:0,multipleNum:1,followFlag:0,followIssueNum:"",followStopFor:0},isCheck:!0,betNum:0,betMoney:0,firstBetList:[],secondBetList:[],threeBetList:[],dAreaList:[],resultList:[],orderInfoDetail:{},isShowTypeSelect:!1,isShowMenu:!1,downTimeInfo:null,dNum:{n_102:1,n_103:2,n_104:3,n_105:4,n_106:5,n_107:6,n_108:7,n_109:1,n_110:1,n_111:1,n_112:2,n_113:1},playType:[{id:"102",name:"任选二"},{id:"103",name:"任选三"},{id:"104",name:"任选四"},{id:"105",name:"任选五"},{id:"106",name:"任选六"},{id:"107",name:"任选七"},{id:"108",name:"任选八"},{id:"109",name:"前一直选"},{id:"110",name:"前二组选"},{id:"111",name:"前二直选"},{id:"112",name:"前三组选"},{id:"113",name:"前三直选"}]},watch:{"buyInfo.multipleNum":function(e){var t=this;e<0&&(t.buyInfo.multipleNum=1),t.resultList.length>0&&e>0&&t.setOrderInfo()},dAreaList:function(e){var t=this;e.length>t.dNum["n_"+t.buyInfo.digitalBetType]&&(t.dAreaList=e.slice(0,e.length-1))}},methods:{showMenu:function(){var e=this;e.isShowMenu=!e.isShowMenu},showTypeSelect:function(e){var t=this;t.isShowTypeSelect=e},clearAll:function(){var e=this;e.emptySelect(),e.resultList=[],e.orderInfoDetail={},e.betNum=0,e.betMoney=0,utility.setSessionStorage("resultList",null),utility.setSessionStorage("orderInfo",null),utility.setiScroll("page-buy-gd115")},emptySelect:function(){var e=this;e.firstBetList=[],e.secondBetList=[],e.threeBetList=[],e.dAreaList=[]},randomBuyTime:function(e){var t=this,i=utility.genreateArr(11),n=utility.getArrByNum(i,e,0);t.buyInfo.digitalBetType=105,t.firstBetList=n.sort(function(e,t){return e-t}),t.addToResult()},validate:function(){var e=this;if(111==e.buyInfo.digitalBetType||113==e.buyInfo.digitalBetType){if(e.firstBetList.length<e.dNum["n_"+e.buyInfo.digitalBetType])return app.showPreloader("第一位至少选择"+e.dNum["n_"+e.buyInfo.digitalBetType]+"个球"),setTimeout(function(){app.hidePreloader()},1e3),!1;if(e.secondBetList.length<e.dNum["n_"+e.buyInfo.digitalBetType])return app.showPreloader("第二位至少选择"+e.dNum["n_"+e.buyInfo.digitalBetType]+"个球"),setTimeout(function(){app.hidePreloader()},1e3),!1;if(113==e.buyInfo.digitalBetType&&e.threeBetList.length<e.dNum["n_"+e.buyInfo.digitalBetType])return app.showPreloader("第三位至少选择"+e.dNum["n_"+e.buyInfo.digitalBetType]+"个球"),setTimeout(function(){app.hidePreloader()},1e3),!1}else if(e.firstBetList.length<e.dNum["n_"+e.buyInfo.digitalBetType]+1)return app.showPreloader("至少选择"+(e.dNum["n_"+e.buyInfo.digitalBetType]+1)+"个球"),setTimeout(function(){app.hidePreloader()},1e3),!1},addToResult:function(){var e=this;0!=e.validate()&&(e.resultList.push({firstBetList:e.firstBetList.sort(function(e,t){return e-t}),secondBetList:e.secondBetList.sort(function(e,t){return e-t}),threeBetList:e.threeBetList.sort(function(e,t){return e-t}),dAreaList:e.dAreaList.sort(function(e,t){return e-t})}),e.emptySelect(),utility.setSessionStorage("resultList",e.resultList),utility.setiScroll("page-buy-gd115"),e.setOrderInfo())},deleteResult:function(e){var t=this;t.resultList.splice(e,1),t.orderInfoDetail.digitalOrderItems.splice(e,1),utility.setSessionStorage("resultList",t.resultList),0==t.resultList.length?(t.betNum=0,t.betMoney=0):t.setOrderInfo()},getDigitalIssue:function(){var e=this;utility.getDigitalIssue({lottoId:e.buyInfo.lotteryTypeId,appType:1,callback:function(t){e.buyInfo.issueNo=t.data[0].currentIssueNo,e.currentIssueName=t.data[0].currentIssueName,e.offTime=t.data[0].offTime}})},setOrderInfo:function(){var e=this;utility.setDigitalOrderInfo(e,e.buyInfo.lotteryTypeId,"广东11选5",function(t,i){return e.buyInfo.digitalBetType+"|"+e.buyInfo.dBetFunction+"|"+(0==e.resultList[i].dAreaList.length?"":e.resultList[i].dAreaList.join(","))+"|"+utility.duplicate(e.resultList[i].firstBetList,e.resultList[i].dAreaList).join(",")+"|"+e.resultList[i].secondBetList.join(",")+"|"+e.resultList[i].threeBetList.join(",")},function(){var t=utility.getSessionStorage("orderInfo");utility.previewOrder({service:CONFIG.SERVICE.dOrderService,params:t.buyInfo,callback:function(t){e.orderInfoDetail=t,e.betNum=t.totalBetsNum,e.betMoney=t.totalOrderPrice},otherCallback:function(t){"7001"==t.code&&(e.getDigitalIssue(),e.setOrderInfo())}})})},generateOrder:function(){var e=this;return 0==e.resultList.length?(app.showPreloader("投注不能为空"),setTimeout(function(){app.hidePreloader()},1e3),!1):void utility.generateOrder({service:CONFIG.SERVICE.dOrderService,callback:function(e){mainView.router.loadPage("view/order/pay.html")}})},dountDownTime:function(){var e=this;setInterval(function(){e.offTime?(e.downTimeInfo=utility.leftTimer(new Date(e.offTime.replace(/-/g,"/")),new Date),e.downTimeInfo.days<=0&&e.downTimeInfo.minutes<=0&&e.downTimeInfo.seconds<=0&&(e.offTime="")):e.getDigitalIssue()},1e3)},init:function(){var e=this;utility.getSessionStorage("orderInfo")&&(utility.getSessionStorage("orderInfo").buyInfo.lotteryTypeId!=e.buyInfo.lotteryTypeId?(utility.setSessionStorage("resultList",null),utility.setSessionStorage("orderInfo",null),utility.setSessionStorage("generateOrder",null)):e.buyInfo=utility.getSessionStorage("orderInfo").buyInfo),utility.getSessionStorage("resultList")&&(e.resultList=utility.getSessionStorage("resultList"),e.resultList.length>0&&e.setOrderInfo()),e.getDigitalIssue()}},created:function(){var e=this;e.init(),e.dountDownTime(),$("body").find(".js-showMenu").on("click",function(){e.isShowMenu=!e.isShowMenu})}})})();