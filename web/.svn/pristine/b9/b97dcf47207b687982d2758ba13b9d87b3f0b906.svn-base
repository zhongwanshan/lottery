(function(){new Vue({el:"#js-buyGd115",data:{offTime:"",currentIssueName:"",buyInfo:{action:CONFIG.ACTION.previewOrder,type:0,lotteryTypeId:"6",issueNo:"",digitalBetType:105,dBetFunction:1,betDetail:"",extraAdd:0,multipleNum:1,followFlag:0,followIssueNum:"",followStopFor:0},isCheck:!0,betNum:0,betMoney:0,firstBetList:[],secondBetList:[],threeBetList:[],dAreaList:[],resultList:[],orderInfoDetail:{},isShowTypeSelect:!1,isShowMenu:!1,downTimeInfo:null,isEndDownTime:!1,dNum:{n_102:1,n_103:2,n_104:3,n_105:4,n_106:5,n_107:6,n_108:7,n_109:0,n_110:1,n_111:1,n_112:2,n_113:1},playType:[{id:"102",name:"任选二"},{id:"103",name:"任选三"},{id:"104",name:"任选四"},{id:"105",name:"任选五"},{id:"106",name:"任选六"},{id:"107",name:"任选七"},{id:"108",name:"任选八"},{id:"109",name:"前一直选"},{id:"110",name:"前二组选"},{id:"111",name:"前二直选"},{id:"112",name:"前三组选"},{id:"113",name:"前三直选"}]},watch:{"buyInfo.multipleNum":function(t){var e=this;t<0&&(e.buyInfo.multipleNum=1),e.resultList.length>0&&t>0&&e.setOrderInfo()},"buyInfo.digitalBetType":function(t){utility.setiScroll()},"buyInfo.dBetFunction":function(t){utility.setiScroll()},dAreaList:function(t){var e=this;t.length>e.dNum["n_"+e.buyInfo.digitalBetType]&&(e.dAreaList=t.slice(0,t.length-1))}},methods:{showMenu:function(){var t=this;t.isShowMenu=!t.isShowMenu},showTypeSelect:function(){var t=this;t.isShowTypeSelect=!t.isShowTypeSelect},countDiff:function(){var t=this,e=0,i=0,n=0;if(t.firstBetList.length==t.secondBetList.length){e=0,i=0;for(var r=0,s=t.firstBetList.length;r<s;r++)e+=parseInt(t.firstBetList[r],10);for(var o=0,u=t.secondBetList.length;o<u;o++)i+=parseInt(t.secondBetList[o],10);if(e==i)return!1}if(t.firstBetList.length==t.threeBetList.length){e=0,n=0;for(var r=0,s=t.firstBetList.length;r<s;r++)e+=parseInt(t.firstBetList[r],10);for(var l=0,a=t.threeBetList.length;l<a;l++)n+=parseInt(t.threeBetList[l],10);if(e==n)return!1}if(t.secondBetList.length==t.threeBetList.length){i=0,n=0;for(var o=0,u=t.secondBetList.length;o<u;o++)i+=parseInt(t.secondBetList[o],10);for(var l=0,a=t.threeBetList.length;l<a;l++)n+=parseInt(t.threeBetList[l],10);if(i==n)return!1}return!0},clearAll:function(){var t=this;t.emptySelect(),t.resultList=[],t.orderInfoDetail={},t.betNum=0,t.betMoney=0,utility.setSessionStorage("resultList",null),utility.setSessionStorage("orderInfo",null),utility.setiScroll()},emptySelect:function(){var t=this;t.firstBetList=[],t.secondBetList=[],t.threeBetList=[],t.dAreaList=[]},randomBuyTime:function(t){var e=this,i=utility.genreateArr(11),n=[],r="",s="";e.buyInfo.digitalBetType>=102&&e.buyInfo.digitalBetType<=110||112==e.buyInfo.digitalBetType?(n=utility.getArrByNum(i,e.dNum["n_"+e.buyInfo.digitalBetType]+1,0),e.firstBetList=n.sort(function(t,e){return t-e})):111==e.buyInfo.digitalBetType?(r=utility.getArrByNum(i,1,0)[0],e.firstBetList=utility.getArrByNum(i,1,0),i.splice(i.indexOf(r),1),e.secondBetList=utility.getArrByNum(i,1,0)):113==e.buyInfo.digitalBetType&&(r=utility.getArrByNum(i,1,0)[0],e.firstBetList=utility.getArrByNum(i,1,0),i.splice(i.indexOf(r),1),s=utility.getArrByNum(i,1,0)[0],e.secondBetList=utility.getArrByNum(i,1,0),i.splice(i.indexOf(s),1),e.threeBetList=utility.getArrByNum(i,1,0)),e.addToResult()},validate:function(){var t=this;if(111==t.buyInfo.digitalBetType||113==t.buyInfo.digitalBetType){if(t.firstBetList.length<t.dNum["n_"+t.buyInfo.digitalBetType])return app.showPreloader("第一位至少选择"+t.dNum["n_"+t.buyInfo.digitalBetType]+"个球"),setTimeout(function(){app.hidePreloader()},1e3),!1;if(t.secondBetList.length<t.dNum["n_"+t.buyInfo.digitalBetType])return app.showPreloader("第二位至少选择"+t.dNum["n_"+t.buyInfo.digitalBetType]+"个球"),setTimeout(function(){app.hidePreloader()},1e3),!1;if(113==t.buyInfo.digitalBetType&&t.threeBetList.length<t.dNum["n_"+t.buyInfo.digitalBetType])return app.showPreloader("第三位至少选择"+t.dNum["n_"+t.buyInfo.digitalBetType]+"个球"),setTimeout(function(){app.hidePreloader()},1e3),!1;if(0==t.countDiff())return app.showPreloader("每位至少选择1个不同的号码"),setTimeout(function(){app.hidePreloader()},1e3),!1}else if(t.firstBetList.length<t.dNum["n_"+t.buyInfo.digitalBetType]+1)return app.showPreloader("至少选择"+(t.dNum["n_"+t.buyInfo.digitalBetType]+1)+"个球"),setTimeout(function(){app.hidePreloader()},1e3),!1;return!0},addToResult:function(){var t=this;0!=t.validate()&&(t.resultList.push({digitalBetType:t.buyInfo.digitalBetType,dBetFunction:t.buyInfo.dBetFunction,firstBetList:t.firstBetList.sort(function(t,e){return t-e}),secondBetList:t.secondBetList.sort(function(t,e){return t-e}),threeBetList:t.threeBetList.sort(function(t,e){return t-e}),dAreaList:t.dAreaList.sort(function(t,e){return t-e})}),t.emptySelect(),utility.setSessionStorage("resultList",t.resultList),utility.setiScroll(),t.setOrderInfo())},deleteResult:function(t){var e=this;e.resultList.splice(t,1),e.orderInfoDetail.digitalOrderItems.splice(t,1),utility.setSessionStorage("resultList",e.resultList),0==e.resultList.length?(e.betNum=0,e.betMoney=0):e.setOrderInfo()},getDigitalIssue:function(){var t=this;utility.getDigitalIssue({lottoId:t.buyInfo.lotteryTypeId,appType:1,callback:function(e){t.buyInfo.issueNo=e.data[0].currentIssueNo,t.currentIssueName=e.data[0].currentIssueName,t.offTime=e.data[0].offTime}})},setOrderInfo:function(){var t=this;utility.setDigitalOrderInfo(t,t.buyInfo.lotteryTypeId,"广东11选5",function(e,i){return t.resultList[i].digitalBetType+"|"+t.resultList[i].dBetFunction+"|"+(0==t.resultList[i].dAreaList.length?"":t.resultList[i].dAreaList.join(","))+"|"+utility.duplicate(t.resultList[i].firstBetList,t.resultList[i].dAreaList).join(",")+"|"+t.resultList[i].secondBetList.join(",")+"|"+t.resultList[i].threeBetList.join(",")},function(){var e=utility.getSessionStorage("orderInfo");utility.previewOrder({service:CONFIG.SERVICE.dOrderService,params:e.buyInfo,callback:function(e){t.orderInfoDetail=e,t.betNum=e.totalBetsNum,t.betMoney=e.totalOrderPrice},otherCallback:function(e){"7001"==e.code&&(t.getDigitalIssue(),t.setOrderInfo())}})})},generateOrder:function(){var t=this;return 0==t.resultList.length?(app.showPreloader("投注不能为空"),setTimeout(function(){app.hidePreloader()},1e3),!1):void utility.generateOrder({service:CONFIG.SERVICE.dOrderService,callback:function(t){mainView.router.loadPage("/app/view/order/pay.html")}})},dountDownTime:function(){var t=this;setInterval(function(){t.offTime?(t.downTimeInfo=utility.leftTimer(Date.parse(new Date(t.offTime.replace(/-/g,"/"))),Date.parse(new Date)),t.downTimeInfo.hours<=0&&t.downTimeInfo.minutes<=0&&t.downTimeInfo.seconds<=0&&(t.offTime="",t.isEndDownTime=!0)):t.getDigitalIssue()},1e3)},init:function(){var t=this;utility.getSessionStorage("orderInfo")&&(utility.getSessionStorage("orderInfo").buyInfo.lotteryTypeId!=t.buyInfo.lotteryTypeId?(utility.setSessionStorage("resultList",null),utility.setSessionStorage("orderInfo",null),utility.setSessionStorage("generateOrder",null)):t.buyInfo=utility.getSessionStorage("orderInfo").buyInfo),utility.getSessionStorage("resultList")&&(t.resultList=utility.getSessionStorage("resultList"),t.resultList.length>0&&t.setOrderInfo()),t.getDigitalIssue()}},created:function(){var t=this;t.init(),t.dountDownTime(),$("body").find(".js-showMenu").on("click",function(){t.isShowMenu=!t.isShowMenu})}})})();